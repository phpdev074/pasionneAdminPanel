import{j as e,G as A,T as D,P as i,r as p,S as M,F as q,I as W,C as F,D as L,M as H,B as _,E as $,W as B}from"./index-f214dafb.js";import{a as E}from"./axios-9cbf0d09.js";import{T as b,a as u,b as G,c as Q,d as J,e as K,f as V}from"./TableSortLabel-907741e4.js";import{b as X}from"./axios-cbe97543.js";import{B as k}from"./Button-13de6010.js";import{D as Y,a as Z,b as ee,c as se,S as te}from"./DialogTitle-eef61539.js";import{D as ne}from"./DialogContentText-c251cea9.js";import{C as oe}from"./Container-afdb2213.js";import{C as re}from"./Card-3d602f5e.js";import{P as ae}from"./Pagination-b5c51ac1.js";import"./useId-53af5d53.js";import"./useControlled-bc52b72f.js";function O({query:t}){return e.jsx(b,{children:e.jsx(u,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(A,{sx:{textAlign:"center"},children:[e.jsx(D,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(D,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}O.propTypes={query:i.string};function z({selected:t,_id:o,name:n,email:d,status:a,subject:s,message:m,onModification:S,avatarUrl:j}){const[x,y]=p.useState(null),[T,C]=p.useState(""),[f,v]=p.useState(!1),w=g=>{y(g.currentTarget)},P=()=>{y(null)},r=()=>{v(!0)},c=()=>{v(!1)},l=async()=>{c();try{const g=localStorage.getItem("token");if(console.log("===>>>token",g),!g){console.error("No token found");return}const I=await E.put(`${X}user/user-soft-delete?id=${o}`,{},{headers:{Authorization:`${g}`}});S(),console.log("Response...",I),I.status===200?C("User deleted successfully."):console.error("Failed to delete user:",I)}catch(g){g.response?console.error("Error response data:",g.response.data):g.request?console.error("No response received:",g.request):console.error("Error",g.message)}};console.log("===>>avtarUrl",j);const h=()=>{C("")};return e.jsxs(e.Fragment,{children:[e.jsxs(b,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(u,{padding:"checkbox",children:" "}),e.jsx(u,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsxs(M,{direction:"row",alignItems:"right",spacing:1,children:[e.jsx(q,{src:`https://api.pasionne.com/public/uploadImages/${j}`,alt:n,loading:"lazy"}),e.jsx(D,{variant:"subtitle2",noWrap:!0,children:n})]})}),e.jsx(u,{children:d}),e.jsx(u,{children:s}),e.jsx(u,{children:m}),e.jsx(u,{children:a==="pending"?e.jsx(k,{variant:"contained",color:"success",size:"small",children:"Pending"}):e.jsx(k,{variant:"contained",color:"warning",size:"small",children:"Done"})}),e.jsx(u,{align:"right",children:e.jsx(W,{onClick:w,children:e.jsx(F,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(L,{open:!!x,anchorEl:x,onClose:P,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(H,{onClick:r,sx:{color:"error.main"},children:[e.jsx(F,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})}),e.jsxs(Y,{open:f,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(Z,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(ee,{children:e.jsx(ne,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(se,{children:[e.jsx(k,{onClick:c,color:"primary",children:"Cancel"}),e.jsx(k,{onClick:l,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsx(te,{open:!!T,autoHideDuration:6e3,onClose:h,message:T})]})}z.propTypes={name:i.string,_id:i.string,email:i.string,subject:i.string,message:i.string,selected:i.bool,status:i.string,onModification:i.string,avatarUrl:i.string};const ie={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function U(t,o,n){return t[n]===null?1:o[n]===null||o[n]<t[n]?-1:o[n]>t[n]?1:0}function le(t,o){return t==="desc"?(n,d)=>U(n,d,o):(n,d)=>-U(n,d,o)}function ce({inputData:t,comparator:o,filterName:n}){console.log("========>>>filterName",n);const d=t.map((a,s)=>[a,s]);return d.sort((a,s)=>{const m=o(a[0],s[0]);return m!==0?m:a[1]-s[1]}),t=d.map(a=>a[0]),n&&(console.log("filterName...",n,"inputData...",t),t=t.filter(a=>{var s;return((s=a==null?void 0:a.name)==null?void 0:s.toLowerCase().indexOf(n.toLowerCase()))!==-1})),t}function N({order:t,orderBy:o,headLabel:n,onRequestSort:d}){const a=s=>m=>{d(m,s)};return e.jsx(G,{children:e.jsxs(b,{children:[e.jsx(u,{padding:"checkbox",children:" "}),n.map(s=>e.jsx(u,{align:s.align||"left",sortDirection:o===s.id?t:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(Q,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?t:"asc",onClick:a(s.id),children:[s.label,o===s.id?e.jsx(_,{sx:{...ie},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))]})})}N.propTypes={order:i.oneOf(["asc","desc"]),orderBy:i.string,headLabel:i.array,onRequestSort:i.func};function R({emptyRows:t,height:o}){return t?e.jsx(b,{sx:{...o&&{height:o*t}},children:e.jsx(u,{colSpan:9})}):null}R.propTypes={emptyRows:i.number,height:i.number};function de(){const[t,o]=p.useState(1),[n,d]=p.useState([]),[a]=p.useState("asc"),[s,m]=p.useState([]),[S]=p.useState("name"),[j]=p.useState(""),[x]=p.useState(10),y=async()=>{var c;const r=localStorage.getItem("token");if(!r){console.error("No token found");return}try{const l=await E.get("http://localhost:7888/api/testimonial/get-contactus",{headers:{Authorization:r}});d((c=l==null?void 0:l.data)==null?void 0:c.data)}catch(l){console.error("Error fetching user data:",l.message),alert(l.message)}};p.useEffect(()=>{y()},[]);const T=(r,c)=>{const l=s.indexOf(c);let h=[];l===-1?h=h.concat(s,c):l===0?h=h.concat(s.slice(1)):l===s.length-1?h=h.concat(s.slice(0,-1)):l>0&&(h=h.concat(s.slice(0,l),s.slice(l+1))),m(h)},C=(r,c)=>{o(c)},f=ce({inputData:n,comparator:le(a,S),filterName:j}),v=!f.length&&!!j,w=Math.ceil(f.length/x),P=x-Math.min(x,f.length-(t-1)*x);return e.jsxs(oe,{children:[e.jsx(M,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(D,{variant:"h4",children:"Contact Us"})}),e.jsxs(re,{children:[e.jsx($,{children:e.jsx(J,{sx:{overflow:"unset"},children:e.jsxs(K,{sx:{minWidth:800},children:[e.jsx(N,{order:a,orderBy:S,rowCount:28,numSelected:s.length,headLabel:[{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"subject",label:"Subject"},{id:"message",label:"Message"},{id:"status",label:"Status"},{id:"",label:""}]}),e.jsxs(V,{children:[n.length>0?n.slice((t-1)*x,t*x).map(r=>e.jsx(z,{name:r.name,email:r.email,status:r.status,subject:r.subject,message:r.message,_id:r._id,avatarUrl:r.profileImage,userType:r.userType,selected:s.indexOf(r.name)!==-1,handleClick:c=>T(c,r.name)},r._id)):e.jsx(b,{children:e.jsx(u,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(R,{height:77,emptyRows:P}),v&&e.jsx(O,{query:j})]})]})})}),e.jsx(M,{alignItems:"center",mt:2,mb:2,children:e.jsx(ae,{count:w,page:t,onChange:C,color:"primary"})})]})]})}function Ce(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx("title",{children:" FAQ "})}),e.jsx(de,{})]})}export{Ce as default};
