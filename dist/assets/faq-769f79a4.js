import{t as E,r as l,j as e,T as U,P as c,I as K,v,w as X,M as P,S as Y,x as Z,W as D}from"./index-4c1f21a2.js";import{a as q}from"./axios-9cbf0d09.js";import{b as A}from"./axios-cbe97543.js";import{c as ee,a as R,u as se,C as ne}from"./CircularProgress-e3d5e951.js";import{S as M,A as H}from"./sweetalert2.esm.all-d5060261.js";import{C as z}from"./Container-bd9c5fdb.js";import{B as S}from"./Button-a1bdae01.js";import{T as re}from"./TextField-e4a808c0.js";import{G as T}from"./Grid-d47a6c9f.js";import{T as I,a as m,b as oe,c as te,d as ie,e as ae,f as le}from"./TableSortLabel-1eac3fb8.js";import{D as O,c as W,a as ce,b as de,S as L}from"./DialogTitle-ba3b5774.js";import"./OutlinedInput-56611c68.js";import"./formControlState-3b7dd2ce.js";import"./isMuiElement-612e197b.js";import"./useId-ac2b3f1a.js";import"./Menu-eb919c0e.js";import"./useControlled-59d58ca4.js";const ue=E(z)(({theme:n})=>({display:"flex",flexDirection:"column",justifyContent:"left",alignItems:"left",minHeight:"100vh",padding:n.spacing(4),borderRadius:"8px",boxShadow:n.shadows[3],backgroundColor:n.palette.background.paper,position:"relative"})),he=E(S)(({theme:n})=>({marginTop:n.spacing(2),backgroundColor:n.palette.primary.main,color:n.palette.common.white,"&:hover":{backgroundColor:n.palette.primary.dark},width:"20%"})),$=E(re)(({theme:n})=>({marginTop:n.spacing(2),width:"100%"})),me=ee({question:R().required("Question is required"),answer:R().required("Answer is required")}),Q=({onSubmit:n,onClose:u,initialData:r})=>{const[t,d]=l.useState(!1),s=se({initialValues:{question:(r==null?void 0:r.question)||"",answer:(r==null?void 0:r.answer)||""},validationSchema:me,enableReinitialize:!0,onSubmit:async p=>{try{d(!0),await n(p),M.fire({icon:"success",title:"Success",text:r?"FAQ updated successfully!":"FAQ created successfully!"}),s.resetForm(),u()}catch{M.fire({icon:"error",title:"Error",text:"An error occurred while submitting the form."})}finally{d(!1)}}});return e.jsxs(ue,{maxWidth:!1,children:[e.jsx(U,{variant:"h4",align:"left",gutterBottom:!0,children:r?"Edit FAQ":"Add FAQ"}),e.jsxs("form",{onSubmit:s.handleSubmit,style:{width:"100%",maxWidth:"600px"},children:[e.jsxs(T,{container:!0,spacing:2,children:[e.jsx(T,{item:!0,xs:12,children:e.jsx($,{id:"question",label:"Question",variant:"outlined",name:"question",value:s.values.question,onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched.question&&!!s.errors.question,helperText:s.touched.question&&s.errors.question})}),e.jsx(T,{item:!0,xs:12,children:e.jsx($,{id:"answer",label:"Answer",variant:"outlined",multiline:!0,rows:4,name:"answer",value:s.values.answer,onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched.answer&&!!s.errors.answer,helperText:s.touched.answer&&s.errors.answer})})]}),t?e.jsx(ne,{sx:{marginTop:2}}):e.jsx(he,{type:"submit",children:r?"Update":"Submit"})]})]})};Q.propTypes={initialData:c.object,onSubmit:c.func.isRequired,onClose:c.func.isRequired};Q.defaultProps={initialData:null};const N=Q;function B({selected:n,question:u,answer:r,images:t,id:d,onModification:s}){const[p,g]=l.useState(null),[j,b]=l.useState(!1),[k,x]=l.useState(!1),[f,o]=l.useState({open:!1,message:"",severity:""}),h=i=>g(i.currentTarget),w=()=>g(null),a=()=>{b(!0),w()},F=()=>b(!1),V=async()=>{var i,y;try{await q.delete(`${A}testimonial/delete-faqs`,{params:{id:d}}),o({open:!0,message:"Item deleted successfully",severity:"success"}),s(),x(!1)}catch(C){o({open:!0,message:((y=(i=C.response)==null?void 0:i.data)==null?void 0:y.message)||"Failed to delete item",severity:"error"})}},_=async i=>{var y,C;try{await q.put(`${A}testimonial/edit-faq?id=${d}`,{question:i==null?void 0:i.question,answer:i==null?void 0:i.answer}),o({open:!0,message:"Blog updated successfully",severity:"success"}),s(),b(!1)}catch(J){o({open:!0,message:((C=(y=J.response)==null?void 0:y.data)==null?void 0:C.message)||"Failed to update blog",severity:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsxs(I,{hover:!0,tabIndex:-1,role:"checkbox",selected:n,children:[e.jsx(m,{padding:"checkbox"}),e.jsx(m,{children:u}),e.jsx(m,{children:r}),e.jsx(m,{align:"left",children:e.jsx(K,{onClick:h,children:e.jsx(v,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(X,{open:!!p,anchorEl:p,onClose:w,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(P,{onClick:a,children:[e.jsx(v,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(P,{onClick:()=>x(!0),children:[e.jsx(v,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),e.jsxs(O,{open:j,onClose:F,children:[e.jsx(N,{initialData:{question:u,answer:r},onClose:F,onSubmit:_}),e.jsx(W,{sx:{justifyContent:"flex-end",position:"absolute",marginTop:39,right:16},children:e.jsx(S,{onClick:F,variant:"contained",children:"Cancel"})})]}),e.jsxs(O,{open:k,onClose:()=>x(!1),children:[e.jsx(ce,{children:"Confirm Delete"}),e.jsx(de,{children:"Are you sure you want to delete this item?"}),e.jsxs(W,{children:[e.jsx(S,{onClick:()=>x(!1),color:"primary",children:"Cancel"}),e.jsx(S,{onClick:V,color:"secondary",children:"Delete"})]})]}),e.jsx(L,{open:f.open,autoHideDuration:6e3,onClose:()=>o(i=>({...i,open:!1})),children:e.jsx(H,{onClose:()=>o(i=>({...i,open:!1})),severity:f.severity,sx:{width:"100%"},children:f.message})})]})}B.propTypes={selected:c.bool,question:c.string,answer:c.string,id:c.string.isRequired,onModification:c.func.isRequired};function G({headLabel:n,onRequestSort:u}){const r=t=>d=>{u(d,t)};return e.jsx(oe,{children:e.jsxs(I,{children:[e.jsx(m,{padding:"checkbox",children:"Â "}),n.map(t=>e.jsx(m,{align:t.align||"left",sx:{width:t.width,minWidth:t.minWidth},children:e.jsx(te,{hideSortIcon:!0,onClick:r(t.id),children:t.label})},t.id))]})})}G.propTypes={headLabel:c.array,onRequestSort:c.func};function pe(){const[n,u]=l.useState([]),[r,t]=l.useState(!1),[d,s]=l.useState(!1),[p,g]=l.useState(""),j=async()=>{var h,w;if(!localStorage.getItem("token")){console.error("No token found");return}try{const a=await q.get("https://pasionneapi.codingacademy.world/api/testimonial/get-faqs");console.log("response?.data?.data.....",(h=a==null?void 0:a.data)==null?void 0:h.data),u((w=a==null?void 0:a.data)==null?void 0:w.data)}catch(a){console.error("Error fetching user data:",a.message),alert(a.message)}};l.useEffect(()=>{j()},[]);const b=()=>{t(!0)},k=()=>{t(!1)},x=async o=>{try{console.log("=====>>>>>newData",o),await q.post(`${A}testimonial/create-faq`,{question:o.question,answer:o.answer}),j(),g("FAQ added successfully"),s(!0),t(!1)}catch(h){console.error("Error submitting form data:",h.message),alert(h.message)}},f=()=>{s(!1)};return e.jsxs(z,{children:[e.jsxs(Y,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(U,{variant:"h4",children:"FAQs"}),!r&&e.jsx(S,{variant:"contained",color:"inherit",onClick:b,startIcon:e.jsx(v,{icon:"eva:plus-fill"}),children:"Add New FAQs"})]}),r?e.jsx(N,{onSubmit:x,onClose:k}):e.jsx(Z,{children:e.jsx(ie,{sx:{overflow:"unset"},children:e.jsxs(ae,{sx:{minWidth:800},children:[e.jsx(G,{headLabel:[{id:"question",label:"Question"},{id:"answer",label:"Answer"},{id:"",label:"Action"}],rowCount:B.length}),e.jsx(le,{children:(n==null?void 0:n.length)>0?n.map(o=>e.jsx(B,{question:o.question,answer:o.answer,id:o._id,onModification:j},o._id)):e.jsx(I,{children:e.jsx(m,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})})})]})})}),e.jsx(L,{open:d,autoHideDuration:6e3,onClose:f,children:e.jsx(H,{onClose:f,severity:"success",sx:{width:"100%"},children:p})})]})}function Ie(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:" FAQ "})}),e.jsx(pe,{})]})}export{Ie as default};
