import{j as e,y as A,T as S,P as l,r as u,S as P,A as q,I as z,v as w,w as W,M as L,B as H,x as _,W as $}from"./index-4c1f21a2.js";import{a as F}from"./axios-9cbf0d09.js";import{T as b,a as h,b as B,c as G,d as J,e as K,f as Q}from"./TableSortLabel-1eac3fb8.js";import{b as V}from"./axios-cbe97543.js";import{D as X,a as Y,b as Z,c as ee,S as ne}from"./DialogTitle-ba3b5774.js";import{D as se}from"./DialogContentText-dcac7053.js";import{B as M}from"./Button-a1bdae01.js";import{C as te}from"./Container-bd9c5fdb.js";import{C as oe}from"./Card-842ee3f6.js";import{P as re}from"./Pagination-33bb0e08.js";import"./useId-ac2b3f1a.js";import"./useControlled-59d58ca4.js";function N({query:t}){return e.jsx(b,{children:e.jsx(h,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(A,{sx:{textAlign:"center"},children:[e.jsx(S,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(S,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}N.propTypes={query:l.string};function U({selected:t,_id:a,name:o,email:d,rating:i,message:n,onModification:m,avatarUrl:j}){const[x,p]=u.useState(null),[y,T]=u.useState(""),[v,f]=u.useState(!1),C=s=>{p(s.currentTarget)},k=()=>{p(null)},D=()=>{f(!0)},r=()=>{f(!1)},g=async()=>{r();try{const s=localStorage.getItem("token");if(console.log("===>>>token",s),!s){console.error("No token found");return}const I=await F.put(`${V}user/user-soft-delete?id=${a}`,{},{headers:{Authorization:`${s}`}});m(),console.log("Response...",I),I.status===200?T("User deleted successfully."):console.error("Failed to delete user:",I)}catch(s){s.response?console.error("Error response data:",s.response.data):s.request?console.error("No response received:",s.request):console.error("Error",s.message)}};console.log("===>>avtarUrl",j);const c=()=>{T("")};return e.jsxs(e.Fragment,{children:[e.jsxs(b,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(h,{padding:"checkbox",children:" "}),e.jsx(h,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsxs(P,{direction:"row",alignItems:"right",spacing:1,children:[e.jsx(q,{src:`https://pasionneapi.codingacademy.world/public/uploadImages/${j}`,alt:o,loading:"lazy"}),e.jsx(S,{variant:"subtitle2",style:{marginTop:"8%"},noWrap:!0,children:o})]})}),e.jsx(h,{children:d}),e.jsx(h,{children:n}),e.jsx(h,{children:i}),e.jsx(h,{align:"right",children:e.jsx(z,{onClick:C,children:e.jsx(w,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(W,{open:!!x,anchorEl:x,onClose:k,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(L,{onClick:D,sx:{color:"error.main"},children:[e.jsx(w,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})}),e.jsxs(X,{open:v,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(Y,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(Z,{children:e.jsx(se,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(ee,{children:[e.jsx(M,{onClick:r,color:"primary",children:"Cancel"}),e.jsx(M,{onClick:g,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsx(ne,{open:!!y,autoHideDuration:6e3,onClose:c,message:y})]})}U.propTypes={name:l.string,_id:l.string,email:l.string,rating:l.string,message:l.string,selected:l.bool,onModification:l.string,avatarUrl:l.string};const ae={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function O(t,a,o){return t[o]===null?1:a[o]===null||a[o]<t[o]?-1:a[o]>t[o]?1:0}function ie(t,a){return t==="desc"?(o,d)=>O(o,d,a):(o,d)=>-O(o,d,a)}function le({inputData:t,comparator:a,filterName:o}){console.log("========>>>filterName",t);const d=t.map((i,n)=>[i,n]);return d.sort((i,n)=>{const m=a(i[0],n[0]);return m!==0?m:i[1]-n[1]}),t=d.map(i=>i[0]),o&&(t=t.filter(i=>{var n;return((n=i==null?void 0:i.name)==null?void 0:n.toLowerCase().indexOf(o.toLowerCase()))!==-1})),t}function E({order:t,orderBy:a,headLabel:o,onRequestSort:d}){const i=n=>m=>{d(m,n)};return e.jsx(B,{children:e.jsxs(b,{children:[e.jsx(h,{padding:"checkbox",children:" "}),o.map(n=>e.jsx(h,{align:n.align||"left",sortDirection:a===n.id?t:!1,sx:{width:n.width,minWidth:n.minWidth},children:e.jsxs(G,{hideSortIcon:!0,active:a===n.id,direction:a===n.id?t:"asc",onClick:i(n.id),children:[n.label,a===n.id?e.jsx(H,{sx:{...ae},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))]})})}E.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function R({emptyRows:t,height:a}){return t?e.jsx(b,{sx:{...a&&{height:a*t}},children:e.jsx(h,{colSpan:9})}):null}R.propTypes={emptyRows:l.number,height:l.number};function ce(){const[t,a]=u.useState(1),[o,d]=u.useState([]),[i]=u.useState("asc"),[n,m]=u.useState([]),[j]=u.useState("name"),[x]=u.useState(""),[p]=u.useState(10),y=async()=>{var g,c;const r=localStorage.getItem("token");if(!r){console.error("No token found");return}try{const s=await F.get("https://pasionneapi.codingacademy.world/api/testimonial/get-testimonial",{headers:{Authorization:r}});console.log("====>>>reponse",s.data.data),d((c=(g=s==null?void 0:s.data)==null?void 0:g.data)==null?void 0:c.data)}catch(s){console.error("Error fetching user data:",s.message),alert(s.message)}};u.useEffect(()=>{y()},[]);const T=(r,g)=>{const c=n.indexOf(g);let s=[];c===-1?s=s.concat(n,g):c===0?s=s.concat(n.slice(1)):c===n.length-1?s=s.concat(n.slice(0,-1)):c>0&&(s=s.concat(n.slice(0,c),n.slice(c+1))),m(s)},v=(r,g)=>{a(g)},f=le({inputData:o,comparator:ie(i,j),filterName:x});console.log("====>>>userData",o);const C=!f.length&&!!x,k=Math.ceil(f.length/p),D=p-Math.min(p,f.length-(t-1)*p);return e.jsxs(te,{children:[e.jsx(P,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(S,{variant:"h4",children:" Testimonials "})}),e.jsxs(oe,{children:[e.jsx(_,{children:e.jsx(J,{sx:{overflow:"unset"},children:e.jsxs(K,{sx:{minWidth:800},children:[e.jsx(E,{order:i,orderBy:j,rowCount:28,numSelected:n.length,headLabel:[{id:"name",label:"Name"},{id:"email",label:"email"},{id:"message",label:"Message"},{id:"rating",label:"rating"},{id:"",label:""}]}),e.jsxs(Q,{children:[o.length>0?o.slice((t-1)*p,t*p).map(r=>{var g,c;return e.jsx(U,{name:(g=r==null?void 0:r.userId)==null?void 0:g.name,email:(c=r==null?void 0:r.userId)==null?void 0:c.email,message:r.message,rating:r.rating,_id:r._id,avatarUrl:r.userImage,userType:r.userType,selected:n.indexOf(r.name)!==-1,handleClick:s=>T(s,r.name)},r._id)}):e.jsx(b,{children:e.jsx(h,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(R,{height:77,emptyRows:D}),C&&e.jsx(N,{query:x})]})]})})}),e.jsx(P,{alignItems:"center",mt:2,mb:2,children:e.jsx(re,{count:k,page:t,onChange:v,color:"primary"})})]})]})}function Se(){return e.jsxs(e.Fragment,{children:[e.jsx($,{children:e.jsx("title",{children:" Testimonial "})}),e.jsx(ce,{})]})}export{Se as default};
