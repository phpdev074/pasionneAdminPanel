import{r as h,j as e,I as B,C as P,D as O,M as F,P as o,S,T as N,E as U,W}from"./index-f214dafb.js";import{a as k}from"./axios-9cbf0d09.js";import{b as v}from"./axios-cbe97543.js";import{T as f,a as l,b as z,c as $,d as H,e as L,f as _}from"./TableSortLabel-907741e4.js";import{D as G,a as J,b as K,c as Q,S as V}from"./DialogTitle-eef61539.js";import{D as X}from"./DialogContentText-c251cea9.js";import{B as C}from"./Button-13de6010.js";import{C as Y}from"./Container-afdb2213.js";import{P as Z}from"./Pagination-b5c51ac1.js";import"./useId-53af5d53.js";import"./useControlled-bc52b72f.js";function I({id:r,name:p,purpose:u,userType:n,propertyType:c,onModification:g,status:T}){const[x,m]=h.useState(null),[t,s]=h.useState(""),[a,d]=h.useState(!1),j=i=>{m(i.currentTarget)},y=()=>{d(!0)},b=()=>{d(!1)},M=()=>{m(null)},E=()=>{s("")},A=async()=>{b();try{const i=localStorage.getItem("token");if(!i){console.error("No token found");return}const D=await k.put(`${v}post-property/delete-posts?id=${r}`,{},{headers:{Authorization:`${i}`}});D.status===200?(s("Post deleted successfully."),g()):console.error("Failed to delete user:",D)}catch(i){i.response?console.error("Error response data:",i.response.data):i.request?console.error("No response received:",i.request):console.error("Error",i.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{hover:!0,tabIndex:-1,children:[e.jsx(l,{padding:"checkbox",children:" "}),e.jsx(l,{children:p}),e.jsx(l,{children:n}),e.jsx(l,{children:u}),e.jsx(l,{children:c}),e.jsx(l,{align:"left",children:e.jsx(B,{onClick:j,children:e.jsx(P,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(O,{open:!!x,anchorEl:x,onClose:M,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(F,{onClick:y,sx:{color:"error.main"},children:[e.jsx(P,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})}),e.jsxs(G,{open:a,onClose:b,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(J,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(K,{children:e.jsx(X,{id:"alert-dialog-description",children:"Are you sure you want to delete this Post?"})}),e.jsxs(Q,{children:[e.jsx(C,{onClick:b,color:"primary",children:"Cancel"}),e.jsx(C,{onClick:A,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsx(V,{open:!!t,autoHideDuration:6e3,onClose:E,message:t})]})}I.propTypes={id:o.string.isRequired,name:o.string.isRequired,userType:o.string.isRequired,purpose:o.string.isRequired,propertyType:o.string.isRequired,onModification:o.func.isRequired,status:o.string};function R({headLabel:r,onRequestSort:p}){const u=n=>c=>{p(c,n)};return e.jsx(z,{children:e.jsxs(f,{children:[e.jsx(l,{padding:"checkbox",children:" "}),r.map(n=>e.jsx(l,{align:n.align||"left",sx:{width:n.width,minWidth:n.minWidth},children:e.jsx($,{hideSortIcon:!0,onClick:u(n.id),children:n.label})},n.id))]})})}R.propTypes={headLabel:o.array,onRequestSort:o.func};function q({emptyRows:r,height:p}){return r?e.jsx(f,{sx:{...p&&{height:p*r}},children:e.jsx(l,{colSpan:9})}):null}q.propTypes={emptyRows:o.number,height:o.number};function w(){const[r,p]=h.useState([]),[u,n]=h.useState(0),[c]=h.useState(10),g=async()=>{var t,s;try{const a=localStorage.getItem("token");if(!a){console.error("No token found");return}const d=await k.get(`${v}post-property/get-post-property-data`,{headers:{Authorization:a}});p(((s=(t=d==null?void 0:d.data)==null?void 0:t.data)==null?void 0:s.items)||[])}catch(a){console.error("Error fetching user data:",a.message),alert(a.message)}};h.useEffect(()=>{g()},[]);const T=(t,s)=>{n(s)},x=Math.ceil(r.length/c),m=Math.max(0,(u+1)*c-r.length);return e.jsxs(Y,{children:[e.jsx(S,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(N,{variant:"h4",children:"Property"})}),e.jsx(U,{children:e.jsx(H,{sx:{overflow:"unset"},children:e.jsxs(L,{sx:{minWidth:800},children:[e.jsx(R,{headLabel:[{id:"name",label:"Name"},{id:"userType",label:"User Type"},{id:"postType",label:"Post Type"},{id:"propertyType",label:"Property Type"},{id:"",label:"Action"}],rowCount:r.length}),e.jsxs(_,{children:[r.length>0?r.slice(u*c,u*c+c).map(t=>{var s,a,d,j,y;return e.jsx(I,{id:t==null?void 0:t._id,name:(s=t==null?void 0:t.userId)==null?void 0:s.name,userType:(a=t==null?void 0:t.userId)==null?void 0:a.userType,purpose:(d=t==null?void 0:t.requestData)==null?void 0:d.postType,propertyType:(y=(j=t==null?void 0:t.requestData)==null?void 0:j.details)==null?void 0:y.propertyType,onModification:g},t==null?void 0:t._id)}):e.jsx(f,{children:e.jsx(l,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),Array.from({length:m}).map((t,s)=>e.jsx(q,{},s))]})]})})}),e.jsx(S,{alignItems:"center",mt:2,mb:2,children:e.jsx(Z,{count:x,page:u+1,onChange:(t,s)=>T(t,s-1),color:"primary"})})]})}function pe(){return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx("title",{children:" Deleted Post Property  "})}),e.jsx(w,{})]})}export{pe as default};
