import{j as e,y as q,T as b,P as i,r as h,S as P,A as L,I as M,v as k,w as H,M as _,B as $,z as V,x as B,W as G}from"./index-4f470b80.js";import{a as O}from"./axios-9cbf0d09.js";import{T as y,a as p,b as J,c as K,d as Q,e as X,f as Y}from"./TableSortLabel-278869ba.js";import{b as Z}from"./axios-c4247b21.js";import{D as ee,a as te,b as se,c as ne,S as re}from"./DialogTitle-924059e0.js";import{D as oe}from"./DialogContentText-833c681d.js";import{B as U}from"./Button-9fa635bc.js";import{O as ae}from"./OutlinedInput-d1a306e0.js";import{I as ie}from"./InputAdornment-bd3098c2.js";import{T as le}from"./Tooltip-a0a1edc4.js";import{C as ce}from"./Container-e4a2ede8.js";import{C as de}from"./Card-5879615a.js";import{P as ue}from"./Pagination-87a9360e.js";import"./useId-5cbb1d54.js";import"./formControlState-7cecdb99.js";import"./useControlled-b58863b4.js";function A({query:t}){return e.jsx(y,{children:e.jsx(p,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(q,{sx:{textAlign:"center"},children:[e.jsx(b,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(b,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}A.propTypes={query:i.string};function E({selected:t,_id:o,name:n,email:c,role:l,userType:s,status:m,onModification:T,avatarUrl:x}){const[v,g]=h.useState(null),[S,C]=h.useState(""),[D,w]=h.useState(!1),f=r=>{g(r.currentTarget)},I=()=>{g(null)},N=()=>{w(!0)},j=()=>{w(!1)},a=async()=>{j();try{const r=localStorage.getItem("token");if(console.log("===>>>token",r),!r){console.error("No token found");return}const d=await O.put(`${Z}user/user-soft-delete?id=${o}`,{},{headers:{Authorization:`${r}`}});T(),console.log("Response...",d),d.status===200?C("User deleted successfully."):console.error("Failed to delete user:",d)}catch(r){r.response?console.error("Error response data:",r.response.data):r.request?console.error("No response received:",r.request):console.error("Error",r.message)}};console.log("===>>avtarUrl",x);const u=()=>{C("")};return e.jsxs(e.Fragment,{children:[e.jsxs(y,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(p,{padding:"checkbox",children:" "}),e.jsx(p,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsxs(P,{direction:"row",alignItems:"right",spacing:1,children:[e.jsx(L,{src:`https://pasionneapi.codingacademy.world/public/uploadImages/${x}`,alt:n,loading:"lazy"}),e.jsx(b,{variant:"subtitle2",noWrap:!0,children:n})]})}),e.jsx(p,{children:c}),e.jsx(p,{children:l}),e.jsx(p,{align:"right",children:e.jsx(M,{onClick:f,children:e.jsx(k,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(H,{open:!!v,anchorEl:v,onClose:I,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(_,{onClick:N,sx:{color:"error.main"},children:[e.jsx(k,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})}),e.jsxs(ee,{open:D,onClose:j,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(te,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(se,{children:e.jsx(oe,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(ne,{children:[e.jsx(U,{onClick:j,color:"primary",children:"Cancel"}),e.jsx(U,{onClick:a,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsx(re,{open:!!S,autoHideDuration:6e3,onClose:u,message:S})]})}E.propTypes={email:i.string,userType:i.string,name:i.string,role:i.string,_id:i.string,selected:i.bool,status:i.string,onModification:i.string,avatarUrl:i.string};const he={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function F(t,o,n){return t[n]===null?1:o[n]===null||o[n]<t[n]?-1:o[n]>t[n]?1:0}function pe(t,o){return t==="desc"?(n,c)=>F(n,c,o):(n,c)=>-F(n,c,o)}function ge({inputData:t,comparator:o,filterName:n}){console.log("========>>>filterName",n);const c=t.map((l,s)=>[l,s]);return c.sort((l,s)=>{const m=o(l[0],s[0]);return m!==0?m:l[1]-s[1]}),t=c.map(l=>l[0]),n&&(console.log("filterName...",n,"inputData...",t),t=t.filter(l=>{var s;return((s=l==null?void 0:l.name)==null?void 0:s.toLowerCase().indexOf(n.toLowerCase()))!==-1})),t}function R({order:t,orderBy:o,headLabel:n,onRequestSort:c}){const l=s=>m=>{c(m,s)};return e.jsx(J,{children:e.jsxs(y,{children:[e.jsx(p,{padding:"checkbox",children:" "}),n.map(s=>e.jsx(p,{align:s.align||"left",sortDirection:o===s.id?t:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(K,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?t:"asc",onClick:l(s.id),children:[s.label,o===s.id?e.jsx($,{sx:{...he},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))]})})}R.propTypes={order:i.oneOf(["asc","desc"]),orderBy:i.string,headLabel:i.array,onRequestSort:i.func};function z({emptyRows:t,height:o}){return t?e.jsx(y,{sx:{...o&&{height:o*t}},children:e.jsx(p,{colSpan:9})}):null}z.propTypes={emptyRows:i.number,height:i.number};function W({numSelected:t,filterName:o,onFilterName:n}){return e.jsxs(V,{sx:{height:96,display:"flex",justifyContent:"space-between",p:c=>c.spacing(0,1,0,3),...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?e.jsxs(b,{component:"div",variant:"subtitle1",children:[t," selected"]}):e.jsx(ae,{value:o,onChange:n,placeholder:"Search user...",startAdornment:e.jsx(ie,{position:"start",children:e.jsx(k,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),t>0&&e.jsx(le,{title:"Delete",children:e.jsx(M,{children:e.jsx(k,{icon:"eva:trash-2-fill"})})})]})}W.propTypes={numSelected:i.number,filterName:i.string,onFilterName:i.func};function me(){const[t,o]=h.useState(1),[n,c]=h.useState([]),[l]=h.useState("asc"),[s,m]=h.useState([]),[T]=h.useState("name"),[x,v]=h.useState(""),[g]=h.useState(10),S=async()=>{var u;const a=localStorage.getItem("token");if(!a){console.error("No token found");return}try{const r=await O.get("https://pasionneapi.codingacademy.world/api/user/get-verified-user",{headers:{Authorization:a}});c((u=r==null?void 0:r.data)==null?void 0:u.data)}catch(r){console.error("Error fetching user data:",r.message),alert(r.message)}};h.useEffect(()=>{S()},[]),console.log("====>>>userData",n);const C=(a,u)=>{const r=s.indexOf(u);let d=[];r===-1?d=d.concat(s,u):r===0?d=d.concat(s.slice(1)):r===s.length-1?d=d.concat(s.slice(0,-1)):r>0&&(d=d.concat(s.slice(0,r),s.slice(r+1))),m(d)},D=(a,u)=>{o(u)},w=a=>{o(1),v(a.target.value)},f=ge({inputData:n,comparator:pe(l,T),filterName:x}),I=!f.length&&!!x,N=Math.ceil(f.length/g),j=g-Math.min(g,f.length-(t-1)*g);return e.jsxs(ce,{children:[e.jsx(P,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(b,{variant:"h4",children:"Users"})}),e.jsxs(de,{children:[e.jsx(W,{numSelected:s.length,filterName:x,onFilterName:w}),e.jsx(B,{children:e.jsx(Q,{sx:{overflow:"unset"},children:e.jsxs(X,{sx:{minWidth:800},children:[e.jsx(R,{order:l,orderBy:T,rowCount:28,numSelected:s.length,headLabel:[{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"mobile",label:"Mobile Number"},{id:"action",label:"Action"}]}),e.jsxs(Y,{children:[n.length>0?n.slice((t-1)*g,t*g).map(a=>e.jsx(E,{name:a.name,role:a.mobileNumber,status:a.status,email:a.email,_id:a._id,avatarUrl:a.profileImage,userType:a.userType,selected:s.indexOf(a.name)!==-1,handleClick:u=>C(u,a.name)},a._id)):e.jsx(y,{children:e.jsx(p,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(z,{height:77,emptyRows:j}),I&&e.jsx(A,{query:x})]})]})})}),e.jsx(P,{alignItems:"center",mt:2,mb:2,children:e.jsx(ue,{count:N,page:t,onChange:D,color:"primary"})})]})]})}function Fe(){return e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsx("title",{children:" Verify User "})}),e.jsx(me,{})]})}export{Fe as default};
