import{j as e,G as A,T as w,P as l,r as u,D as N,M as q,C as z,B as W,S as I,E as H,W as _}from"./index-f214dafb.js";import{a as L}from"./axios-9cbf0d09.js";import{b as B}from"./axios-cbe97543.js";import{T,a as g,b as $,c as G,d as J,e as K,f as Q}from"./TableSortLabel-907741e4.js";import{D as V,a as X,b as Y,c as Z,S as ee}from"./DialogTitle-eef61539.js";import{D as te}from"./DialogContentText-c251cea9.js";import{B as M}from"./Button-13de6010.js";import{C as re}from"./Container-afdb2213.js";import{C as ne}from"./Card-3d602f5e.js";import{P as oe}from"./Pagination-b5c51ac1.js";import"./useId-53af5d53.js";import"./useControlled-bc52b72f.js";function E({query:r}){return e.jsx(T,{children:e.jsx(g,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(A,{sx:{textAlign:"center"},children:[e.jsx(w,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(w,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',r,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}E.propTypes={query:l.string};function O({selected:r,_id:s,name:o,email:c,propertyType:a,propertyCreated:t,onModification:h}){const[j,y]=u.useState(null),[m,b]=u.useState(""),[k,C]=u.useState(!1),D=()=>{y(null)},f=()=>{C(!0)},S=()=>{C(!1)},P=async()=>{S();try{const n=localStorage.getItem("token");if(!n){console.error("No token found");return}const i=await L.put(`https://api.pasionne.com/api/user/user-soft-delete?id=${s}`,{},{headers:{Authorization:`${n}`}});h(),console.log("Response...",i),i.status===200?b("User deleted successfully."):console.error("Failed to delete user:",i)}catch(n){n.response?console.error("Error response data:",n.response.data):n.request?console.error("No response received:",n.request):console.error("Error",n.message)}},v=()=>{b("")};return e.jsxs(e.Fragment,{children:[e.jsxs(T,{hover:!0,tabIndex:-1,role:"checkbox",selected:r,children:[e.jsx(g,{padding:"checkbox",children:" "}),e.jsx(g,{component:"th",scope:"row",style:{marginLeft:"15%",padding:"none"},children:o}),e.jsx(g,{style:{marginLeft:"15%",padding:"none"},children:c}),e.jsx(g,{style:{marginLeft:"15%",padding:"none"},children:a}),e.jsx(g,{style:{marginLeft:"15%",padding:"none"},children:t})]}),e.jsx(N,{open:!!j,anchorEl:j,onClose:D,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(q,{onClick:f,sx:{color:"error.main"},children:[e.jsx(z,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})}),e.jsxs(V,{open:k,onClose:S,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(X,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(Y,{children:e.jsx(te,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(Z,{children:[e.jsx(M,{onClick:S,color:"primary",children:"Cancel"}),e.jsx(M,{onClick:P,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsx(ee,{open:!!m,autoHideDuration:6e3,onClose:v,message:m})]})}O.propTypes={email:l.string,name:l.string,propertyType:l.string,propertyCreated:l.string,_id:l.string,selected:l.bool,onModification:l.string};const se={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function R(r,s,o){return r[o]===null?1:s[o]===null||s[o]<r[o]?-1:s[o]>r[o]?1:0}function ae(r,s){return r==="desc"?(o,c)=>R(o,c,s):(o,c)=>-R(o,c,s)}function ie({inputData:r,comparator:s,filterName:o}){console.log("========>>>filterName",o);const c=r.map((a,t)=>[a,t]);return c.sort((a,t)=>{const h=s(a[0],t[0]);return h!==0?h:a[1]-t[1]}),r=c.map(a=>a[0]),o&&(console.log("filterName...",o,"inputData...",r),r=r.filter(a=>{var t;return((t=a==null?void 0:a.name)==null?void 0:t.toLowerCase().indexOf(o.toLowerCase()))!==-1})),r}function U({order:r,orderBy:s,headLabel:o,onRequestSort:c}){const a=t=>h=>{c(h,t)};return e.jsx($,{children:e.jsxs(T,{children:[e.jsx(g,{padding:"checkbox",children:" "}),o.map(t=>e.jsx(g,{align:t.align||"left",sortDirection:s===t.id?r:!1,sx:{width:t.width,minWidth:t.minWidth},children:e.jsxs(G,{hideSortIcon:!0,active:s===t.id,direction:s===t.id?r:"asc",onClick:a(t.id),children:[t.label,s===t.id?e.jsx(W,{sx:{...se},children:r==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))]})})}U.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function F({emptyRows:r,height:s}){return r?e.jsx(T,{sx:{...s&&{height:s*r}},children:e.jsx(g,{colSpan:9})}):null}F.propTypes={emptyRows:l.number,height:l.number};function le(){const[r,s]=u.useState([]),[o,c]=u.useState(1),[a]=u.useState("asc"),[t,h]=u.useState([]),[j]=u.useState("name"),[y]=u.useState(""),[m]=u.useState(10),b=async()=>{var i,p,d;const n=localStorage.getItem("token");if(!n){console.error("No token found");return}try{const x=await L.get(`${B}post-property/get-reports-property`,{headers:{Authorization:n}});console.log((i=x==null?void 0:x.data)==null?void 0:i.data),s(((d=(p=x==null?void 0:x.data)==null?void 0:p.data)==null?void 0:d.data)||[])}catch(x){console.error("Error fetching user data:",x.message),alert(x.message)}};u.useEffect(()=>{b()},[]);const k=n=>{if(n.target.checked){const i=r.map(p=>p.name);h(i);return}h([])},C=(n,i)=>{const p=t.indexOf(i);let d=[];p===-1?d=d.concat(t,i):p===0?d=d.concat(t.slice(1)):p===t.length-1?d=d.concat(t.slice(0,-1)):p>0&&(d=d.concat(t.slice(0,p),t.slice(p+1))),h(d)},D=(n,i)=>{c(i)},f=ie({inputData:r,comparator:ae(a,j),filterName:y}),S=!f.length&&!!y,P=Math.ceil(f.length/m),v=m-Math.min(m,f.length-(o-1)*m);return e.jsxs(re,{children:[e.jsx(I,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(w,{variant:"h4",children:"Report Property List"})}),e.jsxs(ne,{children:[e.jsx(H,{children:e.jsx(J,{sx:{overflow:"unset"},children:e.jsxs(K,{sx:{minWidth:800},children:[e.jsx(U,{order:a,orderBy:j,rowCount:r.length,numSelected:t.length,onSelectAllClick:k,headLabel:[{id:"reportedBy",label:"reported By"},{id:"email",label:"email"},{id:"propertyType",label:"propertyType"},{id:"propertyCreated",label:"Proerty Created by"}]}),e.jsxs(Q,{children:[f.length>0?f.slice((o-1)*m,o*m).map(n=>e.jsx(O,{name:n.userId.name,email:n.userId.email,propertyType:n.propertyId.requestData.postType,propertyCreated:n.propertyId.userId.name,_id:n._id,avatarUrl:n.avatarUrl,userType:n.userType,selected:t.indexOf(n.name)!==-1,handleClick:i=>C(i,n.name),onModification:b},n._id)):e.jsx(T,{children:e.jsx(g,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(F,{height:77,emptyRows:v}),S&&e.jsx(E,{query:y})]})]})})}),e.jsx(I,{alignItems:"center",mt:2,mb:2,children:e.jsx(oe,{count:P,page:o,onChange:D,color:"primary"})})]})]})}function Se(){return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx("title",{children:" Report Property Page "})}),e.jsx(le,{})]})}export{Se as default};
