import{j as e,y as Q,T as C,P as a,r as p,S as O,A as X,I as W,v as U,w as Y,M as Z,B as ee,z as se,x as re,W as te}from"./index-4f470b80.js";import{a as P}from"./axios-9cbf0d09.js";import{T as S,a as g,b as ne,c as oe,d as ie,e as ae,f as le}from"./TableSortLabel-278869ba.js";import{b as ce}from"./axios-c4247b21.js";import{B as T}from"./Button-9fa635bc.js";import{D as M,a as E,b as V,c as z,S as de}from"./DialogTitle-924059e0.js";import{D as q}from"./DialogContentText-833c681d.js";import{O as ue}from"./OutlinedInput-d1a306e0.js";import{I as he}from"./InputAdornment-bd3098c2.js";import{T as pe}from"./Tooltip-a0a1edc4.js";import{C as ge}from"./Container-e4a2ede8.js";import{C as xe}from"./Card-5879615a.js";import{P as me}from"./Pagination-87a9360e.js";import"./useId-5cbb1d54.js";import"./formControlState-7cecdb99.js";import"./useControlled-b58863b4.js";function $({query:s}){return e.jsx(S,{children:e.jsx(g,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(Q,{sx:{textAlign:"center"},children:[e.jsx(C,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(C,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}$.propTypes={query:a.string};function L({selected:s,_id:n,name:t,email:d,role:l,userType:r,status:m,onModification:y,avatarUrl:f}){const[w,x]=p.useState(null),[b,j]=p.useState(""),[I,D]=p.useState(!1),[v,k]=p.useState(!1),N=i=>{x(i.currentTarget)},F=()=>{x(null)},o=()=>{D(!0)},u=()=>{D(!1)},c=()=>{k(!0)},h=()=>{k(!1)},A=localStorage.getItem("token"),G=async()=>{u();try{const i=await P.put(`${ce}user/user-soft-delete?id=${n}`,{},{headers:{Authorization:`${A}`}});y(),i.status===200?j("User deleted successfully."):console.error("Failed to delete user:",i)}catch(i){i.response?console.error("Error response data:",i.response.data):i.request?console.error("No response received:",i.request):console.error("Error",i.message)}},J=async()=>{h();try{const i=await P.put(`https://pasionneapi.codingacademy.world/api/user/verify-user?id=${n}`,{},{headers:{Authorization:`${A}`}});i.status===200?(j("User verified successfully."),setTimeout(()=>{j(""),y()},3e3)):console.error("Failed to verify user:",i)}catch(i){i.response?console.error("Error response data:",i.response.data):i.request?console.error("No response received:",i.request):console.error("Error",i.message)}},K=()=>{j("")};return e.jsxs(e.Fragment,{children:[e.jsxs(S,{hover:!0,tabIndex:-1,role:"checkbox",selected:s,children:[e.jsx(g,{padding:"checkbox",children:" "}),e.jsx(g,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsxs(O,{direction:"row",alignItems:"right",spacing:1,children:[e.jsx(X,{src:`https://pasionneapi.codingacademy.world/public/uploadImages/${f}`,alt:t,loading:"lazy"}),e.jsx(C,{variant:"subtitle2",noWrap:!0,children:t})]})}),e.jsx(g,{children:d}),e.jsx(g,{children:l}),e.jsx(g,{children:e.jsx(T,{variant:"contained",onClick:c,children:"Verify"})}),e.jsx(g,{align:"right",children:e.jsx(W,{onClick:N,children:e.jsx(U,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(Y,{open:!!w,anchorEl:w,onClose:F,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(Z,{onClick:o,sx:{color:"error.main"},children:[e.jsx(U,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})}),e.jsxs(M,{open:I,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(E,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(V,{children:e.jsx(q,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(z,{children:[e.jsx(T,{onClick:u,color:"primary",children:"Cancel"}),e.jsx(T,{onClick:G,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsxs(M,{open:v,onClose:h,"aria-labelledby":"alert-verify-dialog-title","aria-describedby":"alert-verify-dialog-description",children:[e.jsx(E,{id:"alert-verify-dialog-title",children:"Confirm Verify"}),e.jsx(V,{children:e.jsx(q,{id:"alert-verify-dialog-description",children:"Are you sure you want to verify this user?"})}),e.jsxs(z,{children:[e.jsx(T,{onClick:h,color:"primary",children:"Cancel"}),e.jsx(T,{onClick:J,color:"success",autoFocus:!0,children:"Verify"})]})]}),e.jsx(de,{open:!!b,autoHideDuration:6e3,onClose:K,message:b})]})}L.propTypes={email:a.string,userType:a.string,name:a.string,role:a.string,_id:a.string,selected:a.bool,status:a.string,onModification:a.func,avatarUrl:a.string};const fe={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function R(s,n,t){return s[t]===null?1:n[t]===null||n[t]<s[t]?-1:n[t]>s[t]?1:0}function je(s,n){return s==="desc"?(t,d)=>R(t,d,n):(t,d)=>-R(t,d,n)}function ye({inputData:s,comparator:n,filterName:t}){console.log("========>>>filterName",t);const d=s.map((l,r)=>[l,r]);return d.sort((l,r)=>{const m=n(l[0],r[0]);return m!==0?m:l[1]-r[1]}),s=d.map(l=>l[0]),t&&(console.log("filterName...",t,"inputData...",s),s=s.filter(l=>{var r;return((r=l==null?void 0:l.name)==null?void 0:r.toLowerCase().indexOf(t.toLowerCase()))!==-1})),s}function H({order:s,orderBy:n,headLabel:t,onRequestSort:d}){const l=r=>m=>{d(m,r)};return e.jsx(ne,{children:e.jsxs(S,{children:[e.jsx(g,{padding:"checkbox",children:" "}),t.map(r=>e.jsx(g,{align:r.align||"left",sortDirection:n===r.id?s:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(oe,{hideSortIcon:!0,active:n===r.id,direction:n===r.id?s:"asc",onClick:l(r.id),children:[r.label,n===r.id?e.jsx(ee,{sx:{...fe},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))]})})}H.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,headLabel:a.array,onRequestSort:a.func};function _({emptyRows:s,height:n}){return s?e.jsx(S,{sx:{...n&&{height:n*s}},children:e.jsx(g,{colSpan:9})}):null}_.propTypes={emptyRows:a.number,height:a.number};function B({numSelected:s,filterName:n,onFilterName:t}){return e.jsxs(se,{sx:{height:96,display:"flex",justifyContent:"space-between",p:d=>d.spacing(0,1,0,3),...s>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[s>0?e.jsxs(C,{component:"div",variant:"subtitle1",children:[s," selected"]}):e.jsx(ue,{value:n,onChange:t,placeholder:"Search user...",startAdornment:e.jsx(he,{position:"start",children:e.jsx(U,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),s>0&&e.jsx(pe,{title:"Delete",children:e.jsx(W,{children:e.jsx(U,{icon:"eva:trash-2-fill"})})})]})}B.propTypes={numSelected:a.number,filterName:a.string,onFilterName:a.func};function be(){const[s,n]=p.useState(1),[t,d]=p.useState([]),[l]=p.useState("asc"),[r,m]=p.useState([]),[y]=p.useState("name"),[f,w]=p.useState(""),[x]=p.useState(10),b=async()=>{var u;const o=localStorage.getItem("token");if(!o){console.error("No token found");return}console.log("====>>>token",o);try{const c=await P.get("https://pasionneapi.codingacademy.world/api/user/get-unverfied-users",{headers:{Authorization:o}});d((u=c==null?void 0:c.data)==null?void 0:u.data)}catch(c){console.error("Error fetching user data:",c.message),alert(c.message)}};p.useEffect(()=>{b()},[]);const j=(o,u)=>{const c=r.indexOf(u);let h=[];c===-1?h=h.concat(r,u):c===0?h=h.concat(r.slice(1)):c===r.length-1?h=h.concat(r.slice(0,-1)):c>0&&(h=h.concat(r.slice(0,c),r.slice(c+1))),m(h)},I=(o,u)=>{n(u)},D=o=>{n(1),w(o.target.value)},v=ye({inputData:t,comparator:je(l,y),filterName:f}),k=!v.length&&!!f,N=Math.ceil(v.length/x),F=x-Math.min(x,v.length-(s-1)*x);return e.jsxs(ge,{children:[e.jsx(O,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(C,{variant:"h4",children:"Users"})}),e.jsxs(xe,{children:[e.jsx(B,{numSelected:r.length,filterName:f,onFilterName:D}),e.jsx(re,{children:e.jsx(ie,{sx:{overflow:"unset"},children:e.jsxs(ae,{sx:{minWidth:800},children:[e.jsx(H,{order:l,orderBy:y,rowCount:28,numSelected:r.length,headLabel:[{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"mobile",label:"Mobile Number"},{id:"action",label:"Action"},{id:""}]}),e.jsxs(le,{children:[t.length>0?t.slice((s-1)*x,s*x).map(o=>e.jsx(L,{name:o.name,role:o.mobileNumber,status:o.status,email:o.email,_id:o._id,avatarUrl:o.profileImage,userType:o.userType,selected:r.indexOf(o.name)!==-1,handleClick:u=>j(u,o.name),onModification:b},o._id)):e.jsx(S,{children:e.jsx(g,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(_,{height:77,emptyRows:F}),k&&e.jsx($,{query:f})]})]})})}),e.jsx(O,{alignItems:"center",mt:2,mb:2,children:e.jsx(me,{count:N,page:s,onChange:I,color:"primary"})})]})]})}function Ve(){return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsx("title",{children:" UnVerified Users "})}),e.jsx(be,{})]})}export{Ve as default};
