import{j as e,y as M,T as b,P as c,S,B as W,r as u,x as O,W as q}from"./index-4f470b80.js";import{a as w}from"./axios-9cbf0d09.js";import{b as D}from"./axios-c4247b21.js";import{T as f,a as g,b as H,c as _,d as z,e as $,f as G}from"./TableSortLabel-278869ba.js";import{C as J}from"./Container-e4a2ede8.js";import{C as K}from"./Card-5879615a.js";import{P as Q}from"./Pagination-87a9360e.js";import"./useControlled-b58863b4.js";function P({query:n}){return e.jsx(f,{children:e.jsx(g,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(M,{sx:{textAlign:"center"},children:[e.jsx(b,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(b,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}P.propTypes={query:c.string};function N({selected:n,name:a,email:i,mobileNumber:o,title:l,message:t}){return e.jsxs(f,{hover:!0,tabIndex:-1,role:"checkbox",selected:n,children:[e.jsx(g,{padding:"checkbox",children:" "}),e.jsx(g,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsx(S,{direction:"row",alignItems:"right",spacing:1,children:e.jsx(b,{align:"right",children:a})})}),e.jsx(g,{children:i}),e.jsx(g,{children:o}),e.jsx(g,{children:l}),e.jsx(g,{align:"center",children:t})]})}N.propTypes={email:c.string,mobileNumber:c.string,name:c.string,title:c.string,message:c.string,selected:c.bool};const V={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function v(n,a,i){return n[i]===null?1:a[i]===null||a[i]<n[i]?-1:a[i]>n[i]?1:0}function X(n,a){return n==="desc"?(i,o)=>v(i,o,a):(i,o)=>-v(i,o,a)}function Y({inputData:n,comparator:a,filterName:i}){console.log("========>>>filterName",i);const o=n.map((l,t)=>[l,t]);return o.sort((l,t)=>{const m=a(l[0],t[0]);return m!==0?m:l[1]-t[1]}),n=o.map(l=>l[0]),i&&(console.log("filterName...",i,"inputData...",n),n=n.filter(l=>{var t;return((t=l==null?void 0:l.name)==null?void 0:t.toLowerCase().indexOf(i.toLowerCase()))!==-1})),n}function C({order:n,orderBy:a,headLabel:i,onRequestSort:o}){const l=t=>m=>{o(m,t)};return e.jsx(H,{children:e.jsxs(f,{children:[e.jsx(g,{padding:"checkbox",children:" "}),i.map(t=>e.jsx(g,{align:t.align||"left",sortDirection:a===t.id?n:!1,sx:{width:t.width,minWidth:t.minWidth},children:e.jsxs(_,{hideSortIcon:!0,active:a===t.id,direction:a===t.id?n:"asc",onClick:l(t.id),children:[t.label,a===t.id?e.jsx(W,{sx:{...V},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))]})})}C.propTypes={order:c.oneOf(["asc","desc"]),orderBy:c.string,headLabel:c.array,onRequestSort:c.func};function I({emptyRows:n,height:a}){return n?e.jsx(f,{sx:{...a&&{height:a*n}},children:e.jsx(g,{colSpan:9})}):null}I.propTypes={emptyRows:c.number,height:c.number};function Z(){const[n,a]=u.useState([]),[i,o]=u.useState(1),[l]=u.useState("asc"),[t,m]=u.useState([]),[T]=u.useState("name"),[j]=u.useState(""),[x]=u.useState(10),y=async()=>{var d;const s=localStorage.getItem("token");if(console.log("token...",s),!s){console.error("No token found");return}try{const r=await w.get(`${D}post-property/get-all-feedback`,{headers:{Authorization:s}});a(((d=r==null?void 0:r.data)==null?void 0:d.data)||[])}catch(r){console.error("Error fetching user data:",r.message),alert(r.message)}};u.useEffect(()=>{y()},[]);const F=s=>{if(s.target.checked){const d=n.map(r=>r.name);m(d);return}m([])},R=(s,d)=>{const r=t.indexOf(d);let h=[];r===-1?h=h.concat(t,d):r===0?h=h.concat(t.slice(1)):r===t.length-1?h=h.concat(t.slice(0,-1)):r>0&&(h=h.concat(t.slice(0,r),t.slice(r+1))),m(h)},U=(s,d)=>{o(d)},p=Y({inputData:n,comparator:X(l,T),filterName:j}),E=!p.length&&!!j,A=Math.ceil(p.length/x),k=x-Math.min(x,p.length-(i-1)*x);return e.jsxs(J,{children:[e.jsxs(S,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(b,{variant:"h4",children:"Feedback"})," "]}),e.jsxs(K,{children:[e.jsx(O,{children:e.jsx(z,{sx:{overflow:"unset"},children:e.jsxs($,{sx:{minWidth:800},children:[e.jsx(C,{order:l,orderBy:T,rowCount:n.length,numSelected:t.length,onSelectAllClick:F,headLabel:[{id:"name",label:"Name",align:"left"},{id:"email",label:"Email"},{id:"mobileNumber",label:"Mobile Number"},{id:"title",label:"Title"},{id:"message",label:"Message",align:"center"}]}),e.jsxs(G,{children:[p.length>0?p.slice((i-1)*x,i*x).map(s=>{var d,r,h;return e.jsx(N,{name:(d=s==null?void 0:s.userId)==null?void 0:d.name,email:(r=s==null?void 0:s.userId)==null?void 0:r.email,mobileNumber:(h=s==null?void 0:s.userId)==null?void 0:h.mobileNumber,title:s.title,message:s.message,_id:s._id,avatarUrl:s.avatarUrl,userType:s.userType,selected:t.indexOf(s.name)!==-1,handleClick:L=>R(L,s.name),onModification:y},s._id)}):e.jsx(f,{children:e.jsx(g,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),k>0&&e.jsx(I,{height:77,emptyRows:k}),E&&e.jsx(P,{query:j})]})]})})}),e.jsx(S,{alignItems:"center",mt:2,mb:2,children:e.jsx(Q,{count:A,page:i,onChange:U,color:"primary"})})]})]})}function le(){return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsx("title",{children:" Feedback "})}),e.jsx(Z,{})]})}export{le as default};
