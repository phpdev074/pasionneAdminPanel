import{A as E,r as l,j as e,T as U,P as c,I as K,C as v,D as X,M as P,S as Y,E as Z,W as D}from"./index-f214dafb.js";import{a as q}from"./axios-9cbf0d09.js";import{b as A}from"./axios-cbe97543.js";import{T as ee,c as se,a as R,u as ne,C as re}from"./TextField-af3bc5db.js";import{S as M,G as T,A as H}from"./Grid-07ecfae7.js";import{C as z}from"./Container-afdb2213.js";import{B as C}from"./Button-13de6010.js";import{T as I,a as m,b as te,c as oe,d as ie,e as ae,f as le}from"./TableSortLabel-907741e4.js";import{D as O,c as W,a as ce,b as de,S as L}from"./DialogTitle-eef61539.js";import"./OutlinedInput-d2bfd2c1.js";import"./formControlState-80d95fd1.js";import"./isMuiElement-908d67d1.js";import"./useId-53af5d53.js";import"./Menu-4f563552.js";import"./useControlled-bc52b72f.js";const ue=E(z)(({theme:n})=>({display:"flex",flexDirection:"column",justifyContent:"left",alignItems:"left",minHeight:"100vh",padding:n.spacing(4),borderRadius:"8px",boxShadow:n.shadows[3],backgroundColor:n.palette.background.paper,position:"relative"})),he=E(C)(({theme:n})=>({marginTop:n.spacing(2),backgroundColor:n.palette.primary.main,color:n.palette.common.white,"&:hover":{backgroundColor:n.palette.primary.dark},width:"20%"})),$=E(ee)(({theme:n})=>({marginTop:n.spacing(2),width:"100%"})),me=se({question:R().required("Question is required"),answer:R().required("Answer is required")}),Q=({onSubmit:n,onClose:u,initialData:r})=>{const[o,d]=l.useState(!1),s=ne({initialValues:{question:(r==null?void 0:r.question)||"",answer:(r==null?void 0:r.answer)||""},validationSchema:me,enableReinitialize:!0,onSubmit:async x=>{try{d(!0),await n(x),M.fire({icon:"success",title:"Success",text:r?"FAQ updated successfully!":"FAQ created successfully!"}),s.resetForm(),u()}catch{M.fire({icon:"error",title:"Error",text:"An error occurred while submitting the form."})}finally{d(!1)}}});return e.jsxs(ue,{maxWidth:!1,children:[e.jsx(U,{variant:"h4",align:"left",gutterBottom:!0,children:r?"Edit FAQ":"Add FAQ"}),e.jsxs("form",{onSubmit:s.handleSubmit,style:{width:"100%",maxWidth:"600px"},children:[e.jsxs(T,{container:!0,spacing:2,children:[e.jsx(T,{item:!0,xs:12,children:e.jsx($,{id:"question",label:"Question",variant:"outlined",name:"question",value:s.values.question,onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched.question&&!!s.errors.question,helperText:s.touched.question&&s.errors.question})}),e.jsx(T,{item:!0,xs:12,children:e.jsx($,{id:"answer",label:"Answer",variant:"outlined",multiline:!0,rows:4,name:"answer",value:s.values.answer,onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched.answer&&!!s.errors.answer,helperText:s.touched.answer&&s.errors.answer})})]}),o?e.jsx(re,{sx:{marginTop:2}}):e.jsx(he,{type:"submit",children:r?"Update":"Submit"})]})]})};Q.propTypes={initialData:c.object,onSubmit:c.func.isRequired,onClose:c.func.isRequired};Q.defaultProps={initialData:null};const N=Q;function B({selected:n,question:u,answer:r,images:o,id:d,onModification:s}){const[x,g]=l.useState(null),[j,b]=l.useState(!1),[k,p]=l.useState(!1),[f,t]=l.useState({open:!1,message:"",severity:""}),h=i=>g(i.currentTarget),w=()=>g(null),a=()=>{b(!0),w()},F=()=>b(!1),V=async()=>{var i,y;try{await q.delete(`${A}testimonial/delete-faqs`,{params:{id:d}}),t({open:!0,message:"Item deleted successfully",severity:"success"}),s(),p(!1)}catch(S){t({open:!0,message:((y=(i=S.response)==null?void 0:i.data)==null?void 0:y.message)||"Failed to delete item",severity:"error"})}},_=async i=>{var y,S;try{await q.put(`${A}testimonial/edit-faq?id=${d}`,{question:i==null?void 0:i.question,answer:i==null?void 0:i.answer}),t({open:!0,message:"Blog updated successfully",severity:"success"}),s(),b(!1)}catch(J){t({open:!0,message:((S=(y=J.response)==null?void 0:y.data)==null?void 0:S.message)||"Failed to update blog",severity:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsxs(I,{hover:!0,tabIndex:-1,role:"checkbox",selected:n,children:[e.jsx(m,{padding:"checkbox"}),e.jsx(m,{children:u}),e.jsx(m,{children:r}),e.jsx(m,{align:"left",children:e.jsx(K,{onClick:h,children:e.jsx(v,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(X,{open:!!x,anchorEl:x,onClose:w,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(P,{onClick:a,children:[e.jsx(v,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(P,{onClick:()=>p(!0),children:[e.jsx(v,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),e.jsxs(O,{open:j,onClose:F,children:[e.jsx(N,{initialData:{question:u,answer:r},onClose:F,onSubmit:_}),e.jsx(W,{sx:{justifyContent:"flex-end",position:"absolute",marginTop:39,right:16},children:e.jsx(C,{onClick:F,variant:"contained",children:"Cancel"})})]}),e.jsxs(O,{open:k,onClose:()=>p(!1),children:[e.jsx(ce,{children:"Confirm Delete"}),e.jsx(de,{children:"Are you sure you want to delete this item?"}),e.jsxs(W,{children:[e.jsx(C,{onClick:()=>p(!1),color:"primary",children:"Cancel"}),e.jsx(C,{onClick:V,color:"secondary",children:"Delete"})]})]}),e.jsx(L,{open:f.open,autoHideDuration:6e3,onClose:()=>t(i=>({...i,open:!1})),children:e.jsx(H,{onClose:()=>t(i=>({...i,open:!1})),severity:f.severity,sx:{width:"100%"},children:f.message})})]})}B.propTypes={selected:c.bool,question:c.string,answer:c.string,id:c.string.isRequired,onModification:c.func.isRequired};function G({headLabel:n,onRequestSort:u}){const r=o=>d=>{u(d,o)};return e.jsx(te,{children:e.jsxs(I,{children:[e.jsx(m,{padding:"checkbox",children:"Â "}),n.map(o=>e.jsx(m,{align:o.align||"left",sx:{width:o.width,minWidth:o.minWidth},children:e.jsx(oe,{hideSortIcon:!0,onClick:r(o.id),children:o.label})},o.id))]})})}G.propTypes={headLabel:c.array,onRequestSort:c.func};function xe(){const[n,u]=l.useState([]),[r,o]=l.useState(!1),[d,s]=l.useState(!1),[x,g]=l.useState(""),j=async()=>{var h,w;if(!localStorage.getItem("token")){console.error("No token found");return}try{const a=await q.get("http://localhost:7888/api/testimonial/get-faqs");console.log("response?.data?.data.....",(h=a==null?void 0:a.data)==null?void 0:h.data),u((w=a==null?void 0:a.data)==null?void 0:w.data)}catch(a){console.error("Error fetching user data:",a.message),alert(a.message)}};l.useEffect(()=>{j()},[]);const b=()=>{o(!0)},k=()=>{o(!1)},p=async t=>{try{console.log("=====>>>>>newData",t),await q.post(`${A}testimonial/create-faq`,{question:t.question,answer:t.answer}),j(),g("FAQ added successfully"),s(!0),o(!1)}catch(h){console.error("Error submitting form data:",h.message),alert(h.message)}},f=()=>{s(!1)};return e.jsxs(z,{children:[e.jsxs(Y,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(U,{variant:"h4",children:"FAQs"}),!r&&e.jsx(C,{variant:"contained",color:"inherit",onClick:b,startIcon:e.jsx(v,{icon:"eva:plus-fill"}),children:"Add New FAQs"})]}),r?e.jsx(N,{onSubmit:p,onClose:k}):e.jsx(Z,{children:e.jsx(ie,{sx:{overflow:"unset"},children:e.jsxs(ae,{sx:{minWidth:800},children:[e.jsx(G,{headLabel:[{id:"question",label:"Question"},{id:"answer",label:"Answer"},{id:"",label:"Action"}],rowCount:B.length}),e.jsx(le,{children:(n==null?void 0:n.length)>0?n.map(t=>e.jsx(B,{question:t.question,answer:t.answer,id:t._id,onModification:j},t._id)):e.jsx(I,{children:e.jsx(m,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})})})]})})}),e.jsx(L,{open:d,autoHideDuration:6e3,onClose:f,children:e.jsx(H,{onClose:f,severity:"success",sx:{width:"100%"},children:x})})]})}function Be(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:" FAQ "})}),e.jsx(xe,{})]})}export{Be as default};
