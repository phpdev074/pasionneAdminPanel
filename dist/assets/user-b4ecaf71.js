import{j as e,G as L,T as y,P as i,r as h,S as U,F as $,I as E,C as w,D as _,M as B,B as G,H as J,E as K,W as Q}from"./index-f214dafb.js";import{a as A}from"./axios-9cbf0d09.js";import{T,a as g,b as V,c as X,d as Y,e as Z,f as ee}from"./TableSortLabel-907741e4.js";import{b as te}from"./axios-cbe97543.js";import{D as se,a as ne,b as oe,c as re,S as ae}from"./DialogTitle-eef61539.js";import{D as ie}from"./DialogContentText-c251cea9.js";import{B as M}from"./Button-13de6010.js";import{O as le}from"./OutlinedInput-d2bfd2c1.js";import{I as ce}from"./InputAdornment-9fa09f53.js";import{T as de}from"./Tooltip-4ab0a7bb.js";import{C as ue}from"./Container-afdb2213.js";import{C as he}from"./Card-3d602f5e.js";import{P as pe}from"./Pagination-b5c51ac1.js";import"./useId-53af5d53.js";import"./formControlState-80d95fd1.js";import"./useControlled-bc52b72f.js";function R({query:t}){return e.jsx(T,{children:e.jsx(g,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(L,{sx:{textAlign:"center"},children:[e.jsx(y,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(y,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}R.propTypes={query:i.string};function z({selected:t,_id:o,name:n,email:d,role:l,userType:s,status:x,onModification:S,avatarUrl:f}){const[v,m]=h.useState(null),[C,k]=h.useState(""),[I,D]=h.useState(!1),j=r=>{m(r.currentTarget)},N=()=>{m(null)},P=()=>{D(!0)},b=()=>{D(!1)},a=async()=>{b();try{const r=localStorage.getItem("token");if(console.log("===>>>token",r),!r){console.error("No token found");return}const c=await A.put(`${te}user/user-soft-delete?id=${o}`,{},{headers:{Authorization:`${r}`}});S(),console.log("Response...",c),c.status===200?k("User deleted successfully."):console.error("Failed to delete user:",c)}catch(r){r.response?console.error("Error response data:",r.response.data):r.request?console.error("No response received:",r.request):console.error("Error",r.message)}};console.log("===>>avtarUrl",f);const u=()=>{k("")};return e.jsxs(e.Fragment,{children:[e.jsxs(T,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(g,{padding:"checkbox",children:" "}),e.jsx(g,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsxs(U,{direction:"row",alignItems:"right",spacing:1,children:[e.jsx($,{src:`https://api.pasionne.com/public/uploadImages/${f}`,alt:n,loading:"lazy"}),e.jsx(y,{variant:"subtitle2",noWrap:!0,children:n})]})}),e.jsx(g,{children:d}),e.jsx(g,{children:l}),e.jsx(g,{align:"right",children:e.jsx(E,{onClick:j,children:e.jsx(w,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(_,{open:!!v,anchorEl:v,onClose:N,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(B,{onClick:P,sx:{color:"error.main"},children:[e.jsx(w,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})}),e.jsxs(se,{open:I,onClose:b,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(ne,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(oe,{children:e.jsx(ie,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(re,{children:[e.jsx(M,{onClick:b,color:"primary",children:"Cancel"}),e.jsx(M,{onClick:a,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsx(ae,{open:!!C,autoHideDuration:6e3,onClose:u,message:C})]})}z.propTypes={email:i.string,userType:i.string,name:i.string,role:i.string,_id:i.string,selected:i.bool,status:i.string,onModification:i.string,avatarUrl:i.string};const ge={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function O(t,o,n){return t[n]===null?1:o[n]===null||o[n]<t[n]?-1:o[n]>t[n]?1:0}function me(t,o){return t==="desc"?(n,d)=>O(n,d,o):(n,d)=>-O(n,d,o)}function xe({inputData:t,comparator:o,filterName:n}){console.log("========>>>filterName",n);const d=t.map((l,s)=>[l,s]);return d.sort((l,s)=>{const x=o(l[0],s[0]);return x!==0?x:l[1]-s[1]}),t=d.map(l=>l[0]),n&&(console.log("filterName...",n,"inputData...",t),t=t.filter(l=>{var s;return((s=l==null?void 0:l.name)==null?void 0:s.toLowerCase().indexOf(n.toLowerCase()))!==-1})),t}function W({order:t,orderBy:o,headLabel:n,onRequestSort:d}){const l=s=>x=>{d(x,s)};return e.jsx(V,{children:e.jsxs(T,{children:[e.jsx(g,{padding:"checkbox",children:" "}),n.map(s=>e.jsx(g,{align:s.align||"left",sortDirection:o===s.id?t:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(X,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?t:"asc",onClick:l(s.id),children:[s.label,o===s.id?e.jsx(G,{sx:{...ge},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))]})})}W.propTypes={order:i.oneOf(["asc","desc"]),orderBy:i.string,headLabel:i.array,onRequestSort:i.func};function q({emptyRows:t,height:o}){return t?e.jsx(T,{sx:{...o&&{height:o*t}},children:e.jsx(g,{colSpan:9})}):null}q.propTypes={emptyRows:i.number,height:i.number};function H({numSelected:t,filterName:o,onFilterName:n}){return e.jsxs(J,{sx:{height:96,display:"flex",justifyContent:"space-between",p:d=>d.spacing(0,1,0,3),...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?e.jsxs(y,{component:"div",variant:"subtitle1",children:[t," selected"]}):e.jsx(le,{value:o,onChange:n,placeholder:"Search user...",startAdornment:e.jsx(ce,{position:"start",children:e.jsx(w,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),t>0&&e.jsx(de,{title:"Delete",children:e.jsx(E,{children:e.jsx(w,{icon:"eva:trash-2-fill"})})})]})}H.propTypes={numSelected:i.number,filterName:i.string,onFilterName:i.func};function fe(){const[t,o]=h.useState(1),[n,d]=h.useState([]),[l]=h.useState("asc"),[s,x]=h.useState([]),[S]=h.useState("name"),[f,v]=h.useState(""),[m]=h.useState(10),C=async()=>{var u,r,c,F;const a=localStorage.getItem("token");if(!a){console.error("No token found");return}console.log("====>>>token",a);try{const p=await A.get("http://localhost:7888/api/user/get-all-user-data",{headers:{Authorization:a}});console.log("=======>>>>repsdonsde",p),console.log("response?.data?.data.....",(r=(u=p==null?void 0:p.data)==null?void 0:u.data)==null?void 0:r.data),d((F=(c=p==null?void 0:p.data)==null?void 0:c.data)==null?void 0:F.users)}catch(p){console.error("Error fetching user data:",p.message),alert(p.message)}};h.useEffect(()=>{C()},[]),console.log("====>>>userData",n);const k=(a,u)=>{const r=s.indexOf(u);let c=[];r===-1?c=c.concat(s,u):r===0?c=c.concat(s.slice(1)):r===s.length-1?c=c.concat(s.slice(0,-1)):r>0&&(c=c.concat(s.slice(0,r),s.slice(r+1))),x(c)},I=(a,u)=>{o(u)},D=a=>{o(1),v(a.target.value)},j=xe({inputData:n,comparator:me(l,S),filterName:f}),N=!j.length&&!!f,P=Math.ceil(j.length/m),b=m-Math.min(m,j.length-(t-1)*m);return e.jsxs(ue,{children:[e.jsx(U,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(y,{variant:"h4",children:"Users"})}),e.jsxs(he,{children:[e.jsx(H,{numSelected:s.length,filterName:f,onFilterName:D}),e.jsx(K,{children:e.jsx(Y,{sx:{overflow:"unset"},children:e.jsxs(Z,{sx:{minWidth:800},children:[e.jsx(W,{order:l,orderBy:S,rowCount:28,numSelected:s.length,headLabel:[{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"mobile",label:"Mobile Number"},{id:"action",label:"Action"}]}),e.jsxs(ee,{children:[n.length>0?n.slice((t-1)*m,t*m).map(a=>e.jsx(z,{name:a.name,role:a.mobileNumber,status:a.status,email:a.email,_id:a._id,avatarUrl:a.profileImage,userType:a.userType,selected:s.indexOf(a.name)!==-1,handleClick:u=>k(u,a.name)},a._id)):e.jsx(T,{children:e.jsx(g,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(q,{height:77,emptyRows:b}),N&&e.jsx(R,{query:f})]})]})})}),e.jsx(U,{alignItems:"center",mt:2,mb:2,children:e.jsx(pe,{count:P,page:t,onChange:I,color:"primary"})})]})]})}function Oe(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx("title",{children:" User "})}),e.jsx(fe,{})]})}export{Oe as default};
