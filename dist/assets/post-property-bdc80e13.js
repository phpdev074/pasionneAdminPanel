import{r as h,j as e,I as O,v as D,w as B,M as F,P as o,S,T as N,x as U,W}from"./index-4f470b80.js";import{a as k}from"./axios-9cbf0d09.js";import{b as R}from"./axios-c4247b21.js";import{T as f,a as l,b as z,c as $,d as H,e as L,f as _}from"./TableSortLabel-278869ba.js";import{D as G,a as J,b as K,c as Q,S as V}from"./DialogTitle-924059e0.js";import{D as X}from"./DialogContentText-833c681d.js";import{B as C}from"./Button-9fa635bc.js";import{C as Y}from"./Container-e4a2ede8.js";import{P as Z}from"./Pagination-87a9360e.js";import"./useId-5cbb1d54.js";import"./useControlled-b58863b4.js";function v({id:r,name:p,purpose:u,userType:n,propertyType:c,onModification:g,status:T}){const[x,m]=h.useState(null),[s,t]=h.useState(""),[a,d]=h.useState(!1),j=i=>{m(i.currentTarget)},y=()=>{d(!0)},b=()=>{d(!1)},M=()=>{m(null)},E=()=>{t("")},A=async()=>{b();try{const i=localStorage.getItem("token");if(!i){console.error("No token found");return}const P=await k.put(`${R}post-property/delete-posts?id=${r}`,{},{headers:{Authorization:`${i}`}});P.status===200?(t("Post restore successfully."),g()):console.error("Failed to restore user:",P)}catch(i){i.response?console.error("Error response data:",i.response.data):i.request?console.error("No response received:",i.request):console.error("Error",i.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{hover:!0,tabIndex:-1,children:[e.jsx(l,{padding:"checkbox",children:" "}),e.jsx(l,{children:p}),e.jsx(l,{children:n}),e.jsx(l,{children:u}),e.jsx(l,{children:c}),e.jsx(l,{align:"left",children:e.jsx(O,{onClick:j,children:e.jsx(D,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(B,{open:!!x,anchorEl:x,onClose:M,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(F,{onClick:y,sx:{color:"error.main"},children:[e.jsx(D,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Restore"]})}),e.jsxs(G,{open:a,onClose:b,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(J,{id:"alert-dialog-title",children:"Confirm Restore"}),e.jsx(K,{children:e.jsx(X,{id:"alert-dialog-description",children:"Are you sure you want to Restore this Post?"})}),e.jsxs(Q,{children:[e.jsx(C,{onClick:b,color:"primary",children:"Cancel"}),e.jsx(C,{onClick:A,color:"error",autoFocus:!0,children:"Restore"})]})]}),e.jsx(V,{open:!!s,autoHideDuration:6e3,onClose:E,message:s})]})}v.propTypes={id:o.string.isRequired,name:o.string.isRequired,userType:o.string.isRequired,purpose:o.string.isRequired,propertyType:o.string.isRequired,onModification:o.func.isRequired,status:o.string};function I({headLabel:r,onRequestSort:p}){const u=n=>c=>{p(c,n)};return e.jsx(z,{children:e.jsxs(f,{children:[e.jsx(l,{padding:"checkbox",children:" "}),r.map(n=>e.jsx(l,{align:n.align||"left",sx:{width:n.width,minWidth:n.minWidth},children:e.jsx($,{hideSortIcon:!0,onClick:u(n.id),children:n.label})},n.id))]})})}I.propTypes={headLabel:o.array,onRequestSort:o.func};function q({emptyRows:r,height:p}){return r?e.jsx(f,{sx:{...p&&{height:p*r}},children:e.jsx(l,{colSpan:9})}):null}q.propTypes={emptyRows:o.number,height:o.number};function w(){const[r,p]=h.useState([]),[u,n]=h.useState(0),[c]=h.useState(10),g=async()=>{var s,t;try{const a=localStorage.getItem("token");if(!a){console.error("No token found");return}const d=await k.get(`${R}post-property/get-deleted-property`,{headers:{Authorization:a}});p(((t=(s=d==null?void 0:d.data)==null?void 0:s.data)==null?void 0:t.data)||[])}catch(a){console.error("Error fetching user data:",a.message),alert(a.message)}};h.useEffect(()=>{g()},[]);const T=(s,t)=>{n(t)},x=Math.ceil(r.length/c),m=Math.max(0,(u+1)*c-r.length);return e.jsxs(Y,{children:[e.jsx(S,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(N,{variant:"h4",children:"Delted Property"})}),e.jsx(U,{children:e.jsx(H,{sx:{overflow:"unset"},children:e.jsxs(L,{sx:{minWidth:800},children:[e.jsx(I,{headLabel:[{id:"name",label:"Name"},{id:"userType",label:"User Type"},{id:"postType",label:"Post Type"},{id:"propertyType",label:"Property Type"},{id:"",label:"Action"}],rowCount:r.length}),e.jsxs(_,{children:[r.length>0?r.slice(u*c,u*c+c).map(s=>{var t,a,d,j,y;return e.jsx(v,{id:s==null?void 0:s._id,name:(t=s==null?void 0:s.userId)==null?void 0:t.name,userType:(a=s==null?void 0:s.userId)==null?void 0:a.userType,purpose:(d=s==null?void 0:s.requestData)==null?void 0:d.postType,propertyType:(y=(j=s==null?void 0:s.requestData)==null?void 0:j.details)==null?void 0:y.propertyType,onModification:g},s==null?void 0:s._id)}):e.jsx(f,{children:e.jsx(l,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),r.length>0&&Array.from({length:m}).map((s,t)=>e.jsx(q,{},t))]})]})})}),e.jsx(S,{alignItems:"center",mt:2,mb:2,children:e.jsx(Z,{count:x,page:u+1,onChange:(s,t)=>T(s,t-1),color:"primary"})})]})}function pe(){return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx("title",{children:" Post Property "})}),e.jsx(w,{})]})}export{pe as default};
