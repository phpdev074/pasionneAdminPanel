import{j as e,y as H,T,P as a,r as u,S as M,I as F,v as w,w as _,M as B,B as $,z as G,x as J,W as K}from"./index-4c1f21a2.js";import{a as E}from"./axios-9cbf0d09.js";import{b as Q}from"./axios-cbe97543.js";import{T as S,a as p,b as V,c as X,d as Y,e as Z,f as ee}from"./TableSortLabel-1eac3fb8.js";import{D as te,a as ne,b as se,c as re,S as oe}from"./DialogTitle-ba3b5774.js";import{D as ae}from"./DialogContentText-dcac7053.js";import{B as O}from"./Button-a1bdae01.js";import{O as ie}from"./OutlinedInput-56611c68.js";import{I as le}from"./InputAdornment-c1c4893f.js";import{T as ce}from"./Tooltip-9095c68e.js";import{C as de}from"./Container-bd9c5fdb.js";import{C as he}from"./Card-842ee3f6.js";import{P as ue}from"./Pagination-33bb0e08.js";import"./useId-ac2b3f1a.js";import"./formControlState-3b7dd2ce.js";import"./useControlled-59d58ca4.js";function R({query:n}){return e.jsx(S,{children:e.jsx(p,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(H,{sx:{textAlign:"center"},children:[e.jsx(T,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(T,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}R.propTypes={query:a.string};function z({selected:n,_id:o,name:r,email:l,role:i,userType:t,status:g,onModification:v}){const[j,C]=u.useState(null),[m,b]=u.useState(""),[D,k]=u.useState(!1),I=s=>{C(s.currentTarget)},N=()=>{C(null)},x=()=>{k(!0)},y=()=>{k(!1)},P=async()=>{y();try{const s=localStorage.getItem("token");if(console.log("===>>>token",s),!s){console.error("No token found");return}const c=await E.put(`https://api.pasionne.com/api/user/user-soft-delete?id=${o}`,{},{headers:{Authorization:`${s}`}});v(),console.log("Response...",c),c.status===200?b("User deleted successfully."):console.error("Failed to delete user:",c)}catch(s){s.response?console.error("Error response data:",s.response.data):s.request?console.error("No response received:",s.request):console.error("Error",s.message)}},U=()=>{b("")};return e.jsxs(e.Fragment,{children:[e.jsxs(S,{hover:!0,tabIndex:-1,role:"checkbox",selected:n,children:[e.jsx(p,{padding:"checkbox",children:" "}),e.jsx(p,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsx(M,{direction:"row",alignItems:"right",spacing:1,children:e.jsx(T,{variant:"subtitle2",noWrap:!0,children:r})})}),e.jsx(p,{children:l}),e.jsx(p,{children:i}),e.jsx(p,{align:"center",children:t}),e.jsx(p,{align:"right",children:e.jsx(F,{onClick:I,children:e.jsx(w,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(_,{open:!!j,anchorEl:j,onClose:N,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(B,{onClick:x,sx:{color:"error.main"},children:[e.jsx(w,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Restore"]})}),e.jsxs(te,{open:D,onClose:y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(ne,{id:"alert-dialog-title",children:"Confirm restore"}),e.jsx(se,{children:e.jsx(ae,{id:"alert-dialog-description",children:"Are you sure you want to restore this user?"})}),e.jsxs(re,{children:[e.jsx(O,{onClick:y,color:"primary",children:"Cancel"}),e.jsx(O,{onClick:P,color:"error",autoFocus:!0,children:"restore"})]})]}),e.jsx(oe,{open:!!m,autoHideDuration:6e3,onClose:U,message:m})]})}z.propTypes={email:a.string,userType:a.string,name:a.string,role:a.string,_id:a.string,selected:a.bool,status:a.string,onModification:a.string};const pe={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function A(n,o,r){return n[r]===null?1:o[r]===null||o[r]<n[r]?-1:o[r]>n[r]?1:0}function ge(n,o){return n==="desc"?(r,l)=>A(r,l,o):(r,l)=>-A(r,l,o)}function me({inputData:n,comparator:o,filterName:r}){console.log("========>>>filterName",r);const l=n.map((i,t)=>[i,t]);return l.sort((i,t)=>{const g=o(i[0],t[0]);return g!==0?g:i[1]-t[1]}),n=l.map(i=>i[0]),r&&(console.log("filterName...",r,"inputData...",n),n=n.filter(i=>{var t;return((t=i==null?void 0:i.name)==null?void 0:t.toLowerCase().indexOf(r.toLowerCase()))!==-1})),n}function W({order:n,orderBy:o,headLabel:r,onRequestSort:l}){const i=t=>g=>{l(g,t)};return e.jsx(V,{children:e.jsxs(S,{children:[e.jsx(p,{padding:"checkbox",children:" "}),r.map(t=>e.jsx(p,{align:t.align||"left",sortDirection:o===t.id?n:!1,sx:{width:t.width,minWidth:t.minWidth},children:e.jsxs(X,{hideSortIcon:!0,active:o===t.id,direction:o===t.id?n:"asc",onClick:i(t.id),children:[t.label,o===t.id?e.jsx($,{sx:{...pe},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))]})})}W.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,headLabel:a.array,onRequestSort:a.func};function q({emptyRows:n,height:o}){return n?e.jsx(S,{sx:{...o&&{height:o*n}},children:e.jsx(p,{colSpan:9})}):null}q.propTypes={emptyRows:a.number,height:a.number};function L({numSelected:n,filterName:o,onFilterName:r}){return e.jsxs(G,{sx:{height:96,display:"flex",justifyContent:"space-between",p:l=>l.spacing(0,1,0,3),...n>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[n>0?e.jsxs(T,{component:"div",variant:"subtitle1",children:[n," selected"]}):e.jsx(ie,{value:o,onChange:r,placeholder:"Search user...",startAdornment:e.jsx(le,{position:"start",children:e.jsx(w,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),n>0&&e.jsx(ce,{title:"Delete",children:e.jsx(F,{children:e.jsx(w,{icon:"eva:trash-2-fill"})})})]})}L.propTypes={numSelected:a.number,filterName:a.string,onFilterName:a.func};function xe(){const[n,o]=u.useState([]),[r,l]=u.useState(1),[i]=u.useState("asc"),[t,g]=u.useState([]),[v]=u.useState("name"),[j,C]=u.useState(""),[m]=u.useState(10),b=async()=>{var c,h,d;const s=localStorage.getItem("token");if(!s){console.error("No token found");return}try{const f=await E.get(`${Q}user/get-delete-users`,{headers:{Authorization:s}});console.log((c=f==null?void 0:f.data)==null?void 0:c.data),o(((d=(h=f==null?void 0:f.data)==null?void 0:h.data)==null?void 0:d.data)||[])}catch(f){console.error("Error fetching user data:",f.message),alert(f.message)}};u.useEffect(()=>{b()},[]);const D=s=>{if(s.target.checked){const c=n.map(h=>h.name);g(c);return}g([])},k=(s,c)=>{const h=t.indexOf(c);let d=[];h===-1?d=d.concat(t,c):h===0?d=d.concat(t.slice(1)):h===t.length-1?d=d.concat(t.slice(0,-1)):h>0&&(d=d.concat(t.slice(0,h),t.slice(h+1))),g(d)},I=(s,c)=>{l(c)},N=s=>{l(1),C(s.target.value)},x=me({inputData:n,comparator:ge(i,v),filterName:j}),y=!x.length&&!!j,P=Math.ceil(x.length/m),U=m-Math.min(m,x.length-(r-1)*m);return e.jsxs(de,{children:[e.jsx(M,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(T,{variant:"h4",children:"Delted Users"})}),e.jsxs(he,{children:[e.jsx(L,{numSelected:t.length,filterName:j,onFilterName:N}),e.jsx(J,{children:e.jsx(Y,{sx:{overflow:"unset"},children:e.jsxs(Z,{sx:{minWidth:800},children:[e.jsx(W,{order:i,orderBy:v,rowCount:n.length,numSelected:t.length,onSelectAllClick:D,headLabel:[{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"mobile",label:"Mobile Number"},{id:"userType",label:"User Types",align:"center"},{id:"action",label:"Action"}]}),e.jsxs(ee,{children:[(x==null?void 0:x.length)>0?x.slice((r-1)*m,r*m).map(s=>e.jsx(z,{name:s.name,role:s.mobileNumber,status:s.status,email:s.email,_id:s._id,avatarUrl:s.avatarUrl,userType:s.userType,selected:t.indexOf(s.name)!==-1,handleClick:c=>k(c,s.name),onModification:b},s._id)):e.jsx(S,{children:e.jsx(p,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(q,{height:77,emptyRows:U}),y&&e.jsx(R,{query:j})]})]})})}),e.jsx(M,{alignItems:"center",mt:2,mb:2,children:e.jsx(ue,{count:P,page:r,onChange:I,color:"primary"})})]})]})}function Oe(){return e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsx("title",{children:" Deleted Users  "})}),e.jsx(xe,{})]})}export{Oe as default};
