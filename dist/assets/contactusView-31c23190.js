import{j as e,y as X,T as w,P as l,r as d,S as F,I as Y,v as U,w as Z,M as N,B as ee,x as se,W as te}from"./index-4c1f21a2.js";import{a as O}from"./axios-9cbf0d09.js";import{T as S,a as u,b as ne,c as re,d as oe,e as ae,f as ie}from"./TableSortLabel-1eac3fb8.js";import{b as le}from"./axios-cbe97543.js";import{B as y}from"./Button-a1bdae01.js";import{D as q,a as z,b as W,c as A,S as ce}from"./DialogTitle-ba3b5774.js";import{D as de}from"./DialogContentText-dcac7053.js";import{T as ue}from"./TextField-e4a808c0.js";import{C as he}from"./Container-bd9c5fdb.js";import{C as pe}from"./Card-842ee3f6.js";import{P as ge}from"./Pagination-33bb0e08.js";import"./useId-ac2b3f1a.js";import"./OutlinedInput-56611c68.js";import"./formControlState-3b7dd2ce.js";import"./isMuiElement-612e197b.js";import"./Menu-eb919c0e.js";import"./useControlled-59d58ca4.js";function $({query:t}){return e.jsx(S,{children:e.jsx(u,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(X,{sx:{textAlign:"center"},children:[e.jsx(w,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(w,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}$.propTypes={query:l.string};function H({selected:t,_id:r,name:n,email:h,status:i,subject:s,message:m,revertMessage:C,onModification:f,avatarUrl:x}){const[v,T]=d.useState(null),[k,j]=d.useState(""),[M,D]=d.useState(!1),[R,a]=d.useState(!1),[p,c]=d.useState(""),g=o=>{T(o.currentTarget)},E=()=>{T(null)},Q=()=>{D(!0)},P=()=>{D(!1)},I=()=>{a(!1)},G=()=>{c(""),a(!0),E()},J=async()=>{try{const o=localStorage.getItem("token");if(!o){console.error("No token found");return}console.log("here");const b=await O.post(`https://pasionneapi.codingacademy.world/api/testimonial/revert-mail?id=${r}`,{replyMessage:p},{headers:{Authorization:`${o}`}});b.status===200?(j("Reply sent successfully."),I(),setTimeout(()=>{f()},0)):console.error("Failed to send reply:",b)}catch(o){o.response?console.error("Error response data:",o.response.data):o.request?console.error("No response received:",o.request):console.error("Error",o.message)}},K=async()=>{P();try{const o=localStorage.getItem("token");if(!o){console.error("No token found");return}const b=await O.put(`${le}testimonial/delete-contactUs?id=${r}`,{},{headers:{Authorization:`${o}`}});f(),console.log("Response...",b),b.status===200?j("User deleted successfully."):console.error("Failed to delete user:",b)}catch(o){o.response?console.error("Error response data:",o.response.data):o.request?console.error("No response received:",o.request):console.error("Error",o.message)}};console.log("===>>avtarUrl",x);const V=()=>{j("")};return e.jsxs(e.Fragment,{children:[e.jsxs(S,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(u,{padding:"checkbox",children:" "}),e.jsx(u,{component:"th",scope:"row",align:"center",padding:"none",children:e.jsx(F,{direction:"row",alignItems:"right",spacing:1,children:e.jsx(w,{variant:"subtitle2",noWrap:!0,children:n})})}),e.jsx(u,{children:h}),e.jsx(u,{children:s}),e.jsx(u,{children:m}),e.jsx(u,{children:C}),e.jsx(u,{children:i==="pending"?e.jsx(y,{variant:"contained",color:"success",size:"small",children:"Pending"}):e.jsx(y,{variant:"contained",color:"warning",size:"small",children:"Done"})}),e.jsx(u,{align:"right",children:e.jsx(Y,{onClick:g,children:e.jsx(U,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(Z,{open:!!v,anchorEl:v,onClose:E,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(N,{onClick:Q,sx:{color:"error.main"},children:[e.jsx(U,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]}),e.jsxs(N,{onClick:G,sx:{color:"primary.main"},children:[e.jsx(U,{icon:"eva:undo-outline",sx:{mr:2}}),"Revert"]})]}),e.jsxs(q,{open:M,onClose:P,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(z,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(W,{children:e.jsx(de,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(A,{children:[e.jsx(y,{onClick:P,color:"primary",children:"Cancel"}),e.jsx(y,{onClick:K,color:"error",autoFocus:!0,children:"Delete"})]})]}),e.jsxs(q,{open:R,onClose:I,fullWidth:!0,children:[e.jsx(z,{children:"Reply"}),e.jsx(W,{children:e.jsx(ue,{label:"Reply Message",fullWidth:!0,multiline:!0,rows:4,value:p,onChange:o=>c(o.target.value)})}),e.jsxs(A,{children:[e.jsx(y,{onClick:I,color:"secondary",children:"Cancel"}),e.jsx(y,{onClick:J,color:"primary",variant:"contained",children:"Submit"})]})]}),e.jsx(ce,{open:!!k,autoHideDuration:6e3,onClose:V,message:k})]})}H.propTypes={name:l.string,_id:l.string,email:l.string,subject:l.string,message:l.string,selected:l.bool,status:l.string,onModification:l.string,avatarUrl:l.string,revertMessage:l.string};const me={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function L(t,r,n){return t[n]===null?1:r[n]===null||r[n]<t[n]?-1:r[n]>t[n]?1:0}function xe(t,r){return t==="desc"?(n,h)=>L(n,h,r):(n,h)=>-L(n,h,r)}function je({inputData:t,comparator:r,filterName:n}){console.log("========>>>filterName",n);const h=t.map((i,s)=>[i,s]);return h.sort((i,s)=>{const m=r(i[0],s[0]);return m!==0?m:i[1]-s[1]}),t=h.map(i=>i[0]),n&&(console.log("filterName...",n,"inputData...",t),t=t.filter(i=>{var s;return((s=i==null?void 0:i.name)==null?void 0:s.toLowerCase().indexOf(n.toLowerCase()))!==-1})),t}function _({order:t,orderBy:r,headLabel:n,onRequestSort:h}){const i=s=>m=>{h(m,s)};return e.jsx(ne,{children:e.jsxs(S,{children:[e.jsx(u,{padding:"checkbox",children:" "}),n.map(s=>e.jsx(u,{align:s.align||"left",sortDirection:r===s.id?t:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(re,{hideSortIcon:!0,active:r===s.id,direction:r===s.id?t:"asc",onClick:i(s.id),children:[s.label,r===s.id?e.jsx(ee,{sx:{...me},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))]})})}_.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function B({emptyRows:t,height:r}){return t?e.jsx(S,{sx:{...r&&{height:r*t}},children:e.jsx(u,{colSpan:9})}):null}B.propTypes={emptyRows:l.number,height:l.number};function fe(){const[t,r]=d.useState(1),[n,h]=d.useState([]),[i]=d.useState("asc"),[s,m]=d.useState([]),[C]=d.useState("name"),[f]=d.useState(""),[x]=d.useState(10),v=async()=>{var p;const a=localStorage.getItem("token");if(!a){console.error("No token found");return}try{const c=await O.get("https://pasionneapi.codingacademy.world/api/testimonial/get-contactus",{headers:{Authorization:a}});h((p=c==null?void 0:c.data)==null?void 0:p.data)}catch(c){console.error("Error fetching user data:",c.message),alert(c.message)}};d.useEffect(()=>{v()},[]);const T=(a,p)=>{const c=s.indexOf(p);let g=[];c===-1?g=g.concat(s,p):c===0?g=g.concat(s.slice(1)):c===s.length-1?g=g.concat(s.slice(0,-1)):c>0&&(g=g.concat(s.slice(0,c),s.slice(c+1))),m(g)},k=(a,p)=>{r(p)},j=je({inputData:n,comparator:xe(i,C),filterName:f}),M=!j.length&&!!f,D=Math.ceil(j.length/x),R=x-Math.min(x,j.length-(t-1)*x);return e.jsxs(he,{children:[e.jsx(F,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(w,{variant:"h4",children:"Contact Us"})}),e.jsxs(pe,{children:[e.jsx(se,{children:e.jsx(oe,{sx:{overflow:"unset"},children:e.jsxs(ae,{sx:{minWidth:800},children:[e.jsx(_,{order:i,orderBy:C,rowCount:28,numSelected:s.length,headLabel:[{id:"name",label:"Name"},{id:"email",label:"Email"},{id:"subject",label:"Subject"},{id:"message",label:"Message"},{id:"repliedMesage",label:"Reply Message"},{id:"status",label:"Status"},{id:"",label:""}]}),e.jsxs(ie,{children:[n.length>0?n.slice((t-1)*x,t*x).map(a=>e.jsx(H,{name:a.name,email:a.email,status:a.status,subject:a.subject,message:a.message,revertMessage:a.revertMessage,_id:a._id,avatarUrl:a.profileImage,userType:a.userType,selected:s.indexOf(a.name)!==-1,handleClick:p=>T(p,a.name),onModification:v},a._id)):e.jsx(S,{children:e.jsx(u,{colSpan:6,align:"center",children:e.jsx("div",{style:{marginTop:"10%",fontWeight:"bold"},children:"No Data Found"})})}),e.jsx(B,{height:77,emptyRows:R}),M&&e.jsx($,{query:f})]})]})})}),e.jsx(F,{alignItems:"center",mt:2,mb:2,children:e.jsx(ge,{count:D,page:t,onChange:k,color:"primary"})})]})]})}function Ne(){return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsx("title",{children:" FAQ "})}),e.jsx(fe,{})]})}export{Ne as default};
